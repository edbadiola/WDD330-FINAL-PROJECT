import"./main-irz9xKn3.js";import{c as v}from"./dom-D356mUhA.js";function E(){const a=document.querySelector("#ratings");a.innerHTML="";const s=document.createElement("p");s.id="total-score",["Feel","Storytelling","Performances & Direction","Sound Design","Visual Production"].forEach(t=>{const r=document.createElement("label");r.textContent=t;const e=document.createElement("input");e.type="range",e.min="0",e.max="2",e.value="0",e.step="0.1",e.classList.add("rating-slider");const n=document.createElement("span");n.textContent="0.0",e.addEventListener("input",()=>{n.textContent=parseFloat(e.value).toFixed(1),l()});const o=document.createElement("div");o.classList.add("rating-item"),o.append(r,e,n),a.append(o)}),a.append(s);function l(){const t=document.querySelectorAll(".rating-slider");let r=0;t.forEach(e=>r+=parseFloat(e.value)),s.textContent=`Total Score: ${r.toFixed(1)}/10`}l()}function q(){const a=document.querySelector("#search-input"),s=document.querySelector("#search-btn"),i=document.querySelector("#results");s.addEventListener("click",async()=>{const t=a.value.trim();if(!t)return;i.innerHTML="Loading...";const e=await(await fetch(`https://api.themoviedb.org/3/search/movie?api_key=1ba178059e1a8bb86cd8f42f6d38c30f&query=${t}`)).json();i.innerHTML="",e.results.slice(0,10).forEach(n=>{var c;const o=v("div","movie-card");o.innerHTML=`
        <img src="https://image.tmdb.org/t/p/w200${n.poster_path}" alt="${n.title}" />
        <h3>${n.title}</h3>
        <p>${((c=n.release_date)==null?void 0:c.split("-")[0])||""}</p>
      `,o.addEventListener("click",()=>{l(n)}),i.append(o)})});function l(t){var c;const r=document.querySelector("#log-form-section"),e=document.querySelector("#movie-info");r.classList.remove("hidden"),e.innerHTML=`
    <img src="https://image.tmdb.org/t/p/w200${t.poster_path}" alt="${t.title}" />
    <h2>${t.title}</h2>
    <p>${((c=t.release_date)==null?void 0:c.split("-")[0])||"Unknown Year"}</p>
  `;const n=document.querySelector("#results");n.innerHTML="",E();const o=document.querySelector("#log-form");o.addEventListener("submit",f=>{var m;f.preventDefault();const h=document.querySelectorAll(".rating-slider");let d=0;const u=[];h.forEach(L=>{const g=parseFloat(L.value);u.push(g),d+=g});const y=document.querySelector("#review").value.trim(),S={id:t.id,title:t.title,year:((m=t.release_date)==null?void 0:m.split("-")[0])||"Unknown",poster:t.poster_path,ratings:u,total:parseFloat(d.toFixed(1)),review:y,favorite:!1},p=JSON.parse(localStorage.getItem("filmLog"))||[];p.push(S),localStorage.setItem("filmLog",JSON.stringify(p)),alert("âœ… Movie saved to your Film Log!"),o.reset(),r.classList.add("hidden")})}}q();
